"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[8611],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>g});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=r.createContext({}),y=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=y(e.components);return r.createElement(l.Provider,{value:n},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,s=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=y(t),d=a,g=c["".concat(l,".").concat(d)]||c[d]||u[d]||s;return t?r.createElement(g,o(o({ref:n},p),{},{components:t})):r.createElement(g,o({ref:n},p))}));function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var s=t.length,o=new Array(s);o[0]=d;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i[c]="string"==typeof e?e:a,o[1]=i;for(var y=2;y<s;y++)o[y]=t[y];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},487:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>y});var r=t(7462),a=(t(7294),t(3905));const s={sidebar_position:14},o="sort \u6392\u5e8f",i={unversionedId:"array/sort",id:"array/sort",title:"sort \u6392\u5e8f",description:"sort",source:"@site/docs/array/sort.md",sourceDirName:"array",slug:"/array/sort",permalink:"/clipcc-extension-bddjr_toolbox_v2/array/sort",draft:!1,editUrl:"https://github.com/bddjr/clipcc-extension-bddjr_toolbox_v2/tree/doc/docs/array/sort.md",tags:[],version:"current",sidebarPosition:14,frontMatter:{sidebar_position:14},sidebar:"tutorialSidebar",previous:{title:"\u5e76\u4e3a\u5b57\u7b26\u4e32",permalink:"/clipcc-extension-bddjr_toolbox_v2/array/join"},next:{title:"\u6b63\u5219\u8868\u8fbe\u5f0f",permalink:"/clipcc-extension-bddjr_toolbox_v2/category/\u6b63\u5219\u8868\u8fbe\u5f0f"}},l={},y=[{value:"\u8f93\u5165\u7c7b\u578b",id:"\u8f93\u5165\u7c7b\u578b",level:2},{value:"\u4f7f\u7528\u793a\u4f8b",id:"\u4f7f\u7528\u793a\u4f8b",level:2},{value:"\u6e90\u7801",id:"\u6e90\u7801",level:2}],p={toc:y},c="wrapper";function u(e){let{components:n,...s}=e;return(0,a.kt)(c,(0,r.Z)({},p,s,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"sort-\u6392\u5e8f"},"sort \u6392\u5e8f"),(0,a.kt)("p",null,"sort"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"img",src:t(4209).Z,width:"1260",height:"186"}),"  "),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"\u8f93\u5165\u7c7b\u578b"},"\u8f93\u5165\u7c7b\u578b"),(0,a.kt)("p",null,"v1\uff1aString | Object(Array)",(0,a.kt)("br",{parentName:"p"}),"\n","type\uff1aString",(0,a.kt)("br",{parentName:"p"}),"\n","keymode: String",(0,a.kt)("br",{parentName:"p"}),"\n","key: String",(0,a.kt)("br",{parentName:"p"}),"\n","return_type\uff1aString  "),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"\u4f7f\u7528\u793a\u4f8b"},"\u4f7f\u7528\u793a\u4f8b"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"2",src:t(3933).Z,width:"931",height:"148"}),(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("img",{alt:"3",src:t(3071).Z,width:"792",height:"147"}),"  "),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"\u6e90\u7801"},"\u6e90\u7801"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="/categorys/array.js"',title:'"/categorys/array.js"'},"    {//2.0.0\n        opcode: `${category_id}.sort`,\n        messageId: `${category_id}.sort`,\n        categoryId: category_id,\n        type: type.BlockType.REPORTER,\n        param: {\n            v1: {\n                type: type.ParameterType.STRING,\n                default: '[{\"name\":\"XiaoMing\",\"score\":98},{\"name\":\"XiaoHong\",\"score\":92},{\"name\":\"LiHua\",\"score\":95}]'\n            },\n            type: {\n                type: type.ParameterType.STRING,\n                default: 'down',\n                menu: make_menus(\n                    `${category_id}.sort.menu`,\n                    'null',\n                    'up',\n                    'down'\n                )\n            },\n            keymode: {\n                type: type.ParameterType.STRING,\n                default: '.',\n                menu: keymodeMenu\n            },\n            key: {\n                type: type.ParameterType.STRING,\n                default: 'score',\n            },\n            return_type: {\n                type: type.ParameterType.STRING,\n                default: 'ScratchType',\n                menu: myTypeMenu\n            },\n        },\n        function: (args,util)=>{\n            try{\n                let v = args.v1;\n                if( typeof v !== 'object' )\n                    v = JSON.parse( v );\n\n                switch( args.type ){\n                    case 'null':\n                        return returnType(\n                            v.sort() ,\n                            args.return_type\n                        );\n\n                    case 'up':\n                        if(args.key === ''){\n                            return returnType(\n                                v.sort((a,b)=>{\n                                    return a-b;\n                                }) ,\n                                args.return_type\n                            );\n                        }\n                        // \u4e0d\u5305\u542b\u7684keymode\u4f1a\u629b\u51fa\u9519\u8bef\n                        var keyslist = for_json_get_keys( args.keymode, args.key );\n                        return returnType(\n                            v.sort((a,b)=>{\n                                return (\n                                    get_value_for_sort( b, args.keymode, keyslist )\n                                    -\n                                    get_value_for_sort( a, args.keymode, keyslist )\n                                );\n                            }) ,\n                            args.return_type\n                        );\n\n                    case 'down':\n                        if(args.key === ''){\n                            return returnType(\n                                v.sort((a,b)=>{\n                                    return b-a;\n                                }) ,\n                                args.return_type\n                            );\n                        }\n                        // \u4e0d\u5305\u542b\u7684keymode\u4f1a\u629b\u51fa\u9519\u8bef\n                        var keyslist = for_json_get_keys( args.keymode, args.key );\n                        return returnType(\n                            v.sort((a,b)=>{\n                                return (\n                                    get_value_for_sort( b, args.keymode, keyslist )\n                                    -\n                                    get_value_for_sort( a, args.keymode, keyslist )\n                                );\n                            }) ,\n                            args.return_type\n                        );\n                }\n            }catch(e){\n                return my_log_block_error( util.currentBlock.id, util.currentBlock.opcode , e );\n            }\n        },\n    },\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="/categorys/array.js"',title:'"/categorys/array.js"'},"function get_value_for_sort( thisjson, keymode, keyslist ){\n    if( typeof keyslist === 'number' ){\n        return thisjson[ keyslist ];\n    }\n\n    if( keymode === 'Array' ){\n        for( let i of keyslist ){\n            if( (+i)<0 && Array.isArray(thisjson) ){\n                // \u517c\u5bb9\u6570\u7ec4\u8d1f\u6570\u4e0b\u6807\u53d6\u503c\n                i = thisjson.length + (+i);\n            }\n            thisjson = thisjson[ i ];\n        }\n\n    }else{ // keymode === '.'\n        if( Array.isArray( keyslist ) ){\n            for( let i of keyslist ){\n                if( Array.isArray( i ) ){\n                    if( Array.isArray(thisjson) && (+i[0])<0 ){\n                        // \u517c\u5bb9\u6570\u7ec4\u8d1f\u6570\u4e0b\u6807\u53d6\u503c\n                        i[0] = thisjson.length + (+i[0]);\n                    }\n                    thisjson = thisjson[ i[0] ];\n                    if( i[1] ==='?.' && !thisjson )\n                        break;\n                }else{\n                    if( Array.isArray(thisjson) && (+i)<0 ){\n                        // \u517c\u5bb9\u6570\u7ec4\u8d1f\u6570\u4e0b\u6807\u53d6\u503c\n                        i = thisjson.length + (+i);\n                    }\n                    thisjson = thisjson[ i ];\n                }\n            }\n        }else{ // typeof keyslist === 'string'\n            if( Array.isArray(thisjson) && (+keyslist)<0 ){\n                // \u517c\u5bb9\u6570\u7ec4\u8d1f\u6570\u4e0b\u6807\u53d6\u503c\n                keyslist = thisjson.length + (+keyslist);\n            }\n            thisjson = thisjson[ keyslist ];\n        }\n    }\n    return thisjson\n}\n")))}u.isMDXComponent=!0},3933:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/2-f5ea13a370884150810eb3c594849384.png"},3071:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/3-ba60e2032b29dfc6a640248d366950e6.png"},4209:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/image-c44d3f434bf263b58092551a8f2df0fa.png"}}]);
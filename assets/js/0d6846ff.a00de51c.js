"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[7993],{3905:(e,n,t)=>{t.d(n,{Zo:()=>s,kt:()=>_});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var p=r.createContext({}),m=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):u(u({},n),e)),t},s=function(e){var n=m(e.components);return r.createElement(p.Provider,{value:n},e.children)},o="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),o=m(t),d=a,_=o["".concat(p,".").concat(d)]||o[d]||c[d]||i;return t?r.createElement(_,u(u({ref:n},s),{},{components:t})):r.createElement(_,u({ref:n},s))}));function _(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,u=new Array(i);u[0]=d;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l[o]="string"==typeof e?e:a,u[1]=l;for(var m=2;m<i;m++)u[m]=t[m];return r.createElement.apply(null,u)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},840:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>u,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>m});var r=t(7462),a=(t(7294),t(3905));const i={sidebar_position:2},u="\u89d2\u8272\u9009\u62e9\u5668",l={unversionedId:"ext_func/get_sprite_target",id:"ext_func/get_sprite_target",title:"\u89d2\u8272\u9009\u62e9\u5668",description:"get sprite target",source:"@site/docs/ext_func/get_sprite_target.md",sourceDirName:"ext_func",slug:"/ext_func/get_sprite_target",permalink:"/clipcc-extension-bddjr_toolbox_v2/ext_func/get_sprite_target",draft:!1,editUrl:"https://github.com/bddjr/clipcc-extension-bddjr_toolbox_v2/tree/doc/docs/ext_func/get_sprite_target.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"\u79ef\u6728\u9519\u8bef\u6355\u6349\u4e13\u7528\u5de5\u5177",permalink:"/clipcc-extension-bddjr_toolbox_v2/ext_func/my_log_block_error"},next:{title:"\u8fd4\u56de\u6307\u5b9a\u7c7b\u578b",permalink:"/clipcc-extension-bddjr_toolbox_v2/ext_func/returnType"}},p={},m=[{value:"\u79ef\u6728\u5f15\u7528\u65f6\u7684\u8f93\u5165\u7c7b\u578b",id:"\u79ef\u6728\u5f15\u7528\u65f6\u7684\u8f93\u5165\u7c7b\u578b",level:2},{value:"\u6e90\u7801",id:"\u6e90\u7801",level:2}],s={toc:m},o="wrapper";function c(e){let{components:n,...t}=e;return(0,a.kt)(o,(0,r.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"\u89d2\u8272\u9009\u62e9\u5668"},"\u89d2\u8272\u9009\u62e9\u5668"),(0,a.kt)("p",null,"get sprite target"),(0,a.kt)("p",null,"\u4e00\u79cd\u5f88\u597d\u7684\u89d2\u8272\u9009\u62e9\u5668\u65b9\u6848"),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"\u53ea\u6709\u5728 sprite_type \u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"sprite")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"p"},"id")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"p"},"drawableID")," \u65f6\uff0csprite_name \u624d\u6709\u6548\u3002")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"\u79ef\u6728\u5f15\u7528\u65f6\u7684\u8f93\u5165\u7c7b\u578b"},"\u79ef\u6728\u5f15\u7528\u65f6\u7684\u8f93\u5165\u7c7b\u578b"),(0,a.kt)("p",null,"sprite_type: string",(0,a.kt)("br",{parentName:"p"}),"\n","sprite_name: string | number  "),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"\u6e90\u7801"},"\u6e90\u7801"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="/myjs/tools.js"',title:'"/myjs/tools.js"'},"//2.0.1\n\n/**\n * \n * @param {object} util \n * @param {string} sprite_type  stage sprite thisSprite thisClone id drawableID\n * @param {string|number} sprite_name  name id drawableID\n * @returns {any} object\n */\nfunction get_sprite_target( util, sprite_type, sprite_name ){\n    // \u7b80\u5355\u7684\u53d6\u503c\n    switch( sprite_type ){\n        case 'stage':\n            // \u80cc\u666f\u59cb\u7ec8\u5728\u89d2\u8272\u5217\u8868\u7684\u7b2c0\u4e2a\u4f4d\u7f6e\n            return util.runtime.targets[0];\n        case 'thisSprite':\n            // \u672c\u4f53\u59cb\u7ec8\u5728\u514b\u9686\u4f53\u5217\u8868\u7684\u7b2c0\u4e2a\u4f4d\u7f6e\n            return util.target.sprite.clones[0];\n        case 'thisClone':\n            return util.target;\n    }\n\n    // \u63a5\u4e0b\u6765\u7684\u80af\u5b9a\u8981\u7528\u8fd9\u4e2a\n    if( !util.bddjr_toolbox_v2_sprite_number_cache ){\n        // \u6ca1\u6709\u7f13\u5b58\u7684\u5bf9\u8c61\u5c31\u521b\u5efa\n        util.bddjr_toolbox_v2_sprite_number_cache = {\n            name: {\n                /* \u8bf4\u660e\u683c\u5f0f\n                Stage: 0 //number\n                */\n            },\n            id: {\n                /* \u8bf4\u660e\u683c\u5f0f\n                \"|2On|0TzTO[DRM@?5DX.\": 0 //number\n                */\n            },\n            drawableID: {\n                /* \u8bf4\u660e\u683c\u5f0f\n                0: 0 //number\n                */\n            },\n            number: {\n                /* \u8bf4\u660e\u683c\u5f0f\n                0: {\n                    name: \"Stage\",\n                    id: \"|2On|0TzTO[DRM@?5DX.\",\n                    drawableID: 0\n                },\n                */\n            },\n        }\n    }\n\n    /**number_cache */\n    const NC = util.bddjr_toolbox_v2_sprite_number_cache;\n\n    let return_target;\n    let return_target_number;\n\n    switch( sprite_type ){\n        case 'sprite':\n            if(NC.name[ sprite_name ] !== undefined){\n                // \u8bfb\u7f13\u5b58\n                if(\n                  util.runtime.targets[\n                    NC.name[ sprite_name ]\n                  ].sprite.name == sprite_name //\u662f\u6545\u610f\u7528\u5f31\u7c7b\u578b\u5224\u65ad\u7684\n                ){\n                    // \u6709\u7f13\u5b58\u7684\u5bf9\u8c61\uff0c\u6709\u5bf9\u5e94\u540d\u79f0\u7684\u7f13\u5b58\uff0c\u76f4\u63a5\u8fd4\u56de\n                    return util.runtime.targets[\n                        NC.name[ sprite_name ]\n                    ];\n                }\n                // \u5bf9\u4e0d\u4e0a\uff1f\u4f9d\u636e\u7f13\u5b58\u540d\u79f0\u5220\u9664\u5bf9\u5e94id\u7f13\u5b58\n                Reflect.deleteProperty(\n                    NC.id ,\n                    NC.number[ NC.name[ sprite_name ] ]?.id\n                );\n                // \u5bf9\u5e94drawableID\n                Reflect.deleteProperty(\n                    NC.drawableID ,\n                    NC.number[ NC.name[ sprite_name ] ]?.drawableID\n                );\n                // \u5bf9\u5e94number\u4e00\u6574\u5757\n                Reflect.deleteProperty(\n                    NC.number ,\n                    NC.name[ sprite_name ]\n                );\n                // name\n                Reflect.deleteProperty(\n                    NC.name ,\n                    sprite_name\n                );\n            }\n            // \u91cd\u65b0\u67e5\u627e\n            for( let i in util.runtime.targets ){\n                let J = util.runtime.targets[i];\n                if(\n                  J.sprite.name == sprite_name //\u662f\u6545\u610f\u7528\u5f31\u7c7b\u578b\u5224\u65ad\u7684\n                  &&\n                  !J.isStage //\u7528\u7684\u662fsprite\u6a21\u5f0f\uff0c\u6240\u4ee5\u80af\u5b9a\u4e0d\u80fd\u662f\u80cc\u666f\n                ){\n                    // \u627e\u5230\u4e86\uff0c\u5c06\u8981\u8fd4\u56de\u7684\u503c\u8bbe\u7f6e\u4e3a\u8fd9\u4e2a\u5bf9\u8c61\uff0c\u7136\u540e\u9000\u51fa\u5faa\u73af\n                    return_target_number = i;\n                    return_target = J;\n                    break;\n                }\n            }\n            // \u9000\u51faswitch\n            break;\n\n        case 'id':\n            if(NC.id[ sprite_name ] !== undefined){\n                // \u8bfb\u7f13\u5b58\n                if(\n                  util.runtime.targets[\n                    NC.id[ sprite_name ]\n                  ].id == sprite_name //\u662f\u6545\u610f\u7528\u5f31\u7c7b\u578b\u5224\u65ad\u7684\n                ){\n                    // \u6709\u7f13\u5b58\u7684\u5bf9\u8c61\uff0c\u6709\u5bf9\u5e94\u540d\u79f0\u7684\u7f13\u5b58\uff0c\u76f4\u63a5\u8fd4\u56de\n                    return util.runtime.targets[\n                        NC.id[ sprite_name ]\n                    ];\n                }\n                // \u5bf9\u4e0d\u4e0a\uff1f\u4f9d\u636e\u7f13\u5b58\u540d\u79f0\u5220\u9664\u5bf9\u5e94name\u7f13\u5b58\n                Reflect.deleteProperty(\n                    NC.name ,\n                    NC.number[ NC.name[ sprite_name ] ]?.name\n                );\n                // \u5bf9\u5e94drawableID\n                Reflect.deleteProperty(\n                    NC.drawableID ,\n                    NC.number[ NC.name[ sprite_name ] ]?.drawableID\n                );\n                // \u5bf9\u5e94number\u4e00\u6574\u5757\n                Reflect.deleteProperty(\n                    NC.number ,\n                    NC.name[ sprite_name ]\n                );\n                // id\n                Reflect.deleteProperty(\n                    NC.id ,\n                    sprite_name\n                );\n            }\n            // \u91cd\u65b0\u67e5\u627e\n            for( let i in util.runtime.targets ){\n                let J = util.runtime.targets[i];\n                if(J.id == sprite_name){ //\u662f\u6545\u610f\u7528\u5f31\u7c7b\u578b\u5224\u65ad\u7684\n                    // \u627e\u5230\u4e86\uff0c\u5c06\u8981\u8fd4\u56de\u7684\u503c\u8bbe\u7f6e\u4e3a\u8fd9\u4e2a\u5bf9\u8c61\uff0c\u7136\u540e\u9000\u51fa\u5faa\u73af\n                    return_target_number = i;\n                    return_target = J;\n                    break;\n                }\n            }\n            // \u9000\u51faswitch\n            break;\n\n        case 'drawableID':\n            if(NC.drawableID[ sprite_name ] !== undefined){\n                // \u8bfb\u7f13\u5b58\n                if(\n                  util.runtime.targets[\n                    NC.drawableID[ sprite_name ]\n                  ].drawableID == sprite_name //\u662f\u6545\u610f\u7528\u5f31\u7c7b\u578b\u5224\u65ad\u7684\n                ){\n                    // \u6709\u7f13\u5b58\u7684\u5bf9\u8c61\uff0c\u6709\u5bf9\u5e94\u540d\u79f0\u7684\u7f13\u5b58\uff0c\u76f4\u63a5\u8fd4\u56de\n                    return util.runtime.targets[\n                        NC.drawableID[ sprite_name ]\n                    ];\n                }\n                // \u5bf9\u4e0d\u4e0a\uff1f\u4f9d\u636e\u7f13\u5b58\u540d\u79f0\u5220\u9664\u5bf9\u5e94name\u7f13\u5b58\n                Reflect.deleteProperty(\n                    NC.name ,\n                    NC.number[ NC.name[ sprite_name ] ]?.name\n                );\n                // \u5bf9\u5e94id\n                Reflect.deleteProperty(\n                    NC.id ,\n                    NC.number[ NC.name[ sprite_name ] ]?.id\n                );\n                // \u5bf9\u5e94number\u4e00\u6574\u5757\n                Reflect.deleteProperty(\n                    NC.number ,\n                    NC.name[ sprite_name ]\n                );\n                // drawableID\n                Reflect.deleteProperty(\n                    NC.drawableID ,\n                    sprite_name\n                );\n            }\n            // \u91cd\u65b0\u67e5\u627e\n            for( let i in util.runtime.targets ){\n                let J = util.runtime.targets[i];\n                if(J.drawableID == sprite_name){ //\u662f\u6545\u610f\u7528\u5f31\u7c7b\u578b\u5224\u65ad\u7684\n                    // \u627e\u5230\u4e86\uff0c\u5c06\u8981\u8fd4\u56de\u7684\u503c\u8bbe\u7f6e\u4e3a\u8fd9\u4e2a\u5bf9\u8c61\uff0c\u7136\u540e\u9000\u51fa\u5faa\u73af\n                    return_target_number = i;\n                    return_target = J;\n                    break;\n                }\n            }\n            // \u9000\u51faswitch\n            break;\n    }\n\n    if(return_target === undefined){\n        // \u627e\u4e0d\u5230\uff1f\u629b\u51fa\u9519\u8bef\n        throw `Can not get sprite target from type:${sprite_type} name:${sprite_name}`;\n    }\n\n\n    // \u52a0\u5165\u7f13\u5b58\n    if(return_target.isOriginal){\n        // \u4e0d\u662f\u514b\u9686\u4f53\u624d\u4f1a\u7f13\u5b58\u540d\u79f0\n        NC.name[ return_target.sprite.name ] = return_target_number;\n    }\n    NC.id[ return_target.id ] = return_target_number;\n    NC.drawableID[ return_target.drawableID ] = return_target_number;\n\n    if(NC.number[ return_target_number ]){\n        // \u6709\u6b8b\u7559\u7684number\u7f13\u5b58\uff1f\u627e\u5230\u5173\u8054\u7684\u5176\u5b83\u7f13\u5b58\u5e76\u6e05\u9664\n        Reflect.deleteProperty(\n            NC.name ,\n            NC.number[ return_target_number ].name\n        );\n        Reflect.deleteProperty(\n            NC.id ,\n            NC.number[ return_target_number ].id\n        );\n        Reflect.deleteProperty(\n            NC.drawableID ,\n            NC.number[ return_target_number ].drawableID\n        );\n    }\n    // \u8986\u76d6\u4e00\u4e2a\u65b0\u7684\u7f13\u5b58\u5230number\n    NC.number[ return_target_number ] = {\n        number: return_target_number,\n        drawableID: return_target.drawableID,\n        id: return_target.id,\n        // \u4e0d\u662f\u514b\u9686\u4f53\u624d\u4f1a\u7f13\u5b58\u540d\u79f0\uff0cnull\u4ece\u903b\u8f91\u4e0a\u4e0d\u4f1a\u5bfc\u81f4\u6545\u969c\n        name: return_target.isOriginal ? return_target.sprite.name : null\n    }\n\n    return return_target;\n}\n\nmodule.exports.get_sprite_target = get_sprite_target;\n")))}c.isMDXComponent=!0}}]);